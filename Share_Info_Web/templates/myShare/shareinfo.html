{% extends 'myShare/base.html' %}
{% load staticfiles %}
{% block main %}
<div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-lg-3">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-success pull-right">股票</span>
                        <h5>股票名</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins bt">{{share.sname}}</h1>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-info pull-right">开盘</span>
                        <h5>开盘价（¥）</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins bt">￥{{share.nprice}}</h1>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-primary pull-right">最高</span>
                        <h5>今日最高（¥）</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins bt">￥--</h1>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-danger pull-right">最低</span>
                        <h5>今日最低（¥）</h5>
                    </div>
                    <div class="ibox-content">
                      <h1 class="no-margins bt ">￥--</h1>
                    </div>
                </div>
        </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-primary pull-right">实时</span>
                        <h5 >当前价（¥）</h5>
                    </div>
                    <div class="ibox-content">
                        <p hidden="hidden" id="sid">{{share.id}}</p>
                        <table width="100%" class="">
                            <tbody align="center">
                                <tr>
                                    <td width="30%">
                                        <font style="font-size:30px;" class="no-margins bt" id="ontimeprice"> —— —— </font>
                                    </td>
                                    <td width="40%">
                                        <button id="kaipan" class="btn btn-info" onclick="">开盘</button>
                                    </td>
                                    <td width="15%">
                                        <button id="buybtn"  class="btn btn-info">
                                            <a class="buyandsell" id="buy" hidden="hidden" href="{% url 'myShare:buyorder' share.id %}">买入</a>
                                        </button>
                                    </td>
                                    <td width="15%">
                                        <button id="sellbtn" class="btn btn-info">
                                            <a class="buyandsell" id="sell" hidden="hidden"  href="{% url 'myShare:showsellorder' share.id %}">卖出</a>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>


                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <span class="label label-danger pull-right">票数</span>
                        <h5>证券票数</h5>
                    </div>
                    <div class="ibox-content">
                      <h1 class="no-margins bt red">{{share.issuenum}}股</h1>
                    </div>
                </div>
    </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>交易记录</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <table class="table table-hover no-margins">
                            <tbody align="center">
                            <tr>
                                <td width="15%">-</td>
                                <td width="20%">用户</td>
                                <td width="20%" class="text-navy">交易价格</td>
                                <td width="20%">交易数量</td>
                                <td width="25%">成交日期</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
      </div>

<!--        <p>{{share.sname}}</p>-->
<!--        <p>{{share.snumber}}</p>-->
<!--        <p>剩余股票数{{share.issuenum}}</p>-->
<!--        <p>开盘价{{share.nprice}}</p>-->
<!--        <p>当前价</p>-->
<!--        <button id="kaipan">开盘</button>-->
        <!--<p>历史最高价{{share.hprice}}</p>-->
        <!--<p>历史最低价{{share.lprice}}</p>-->
<!--        <p id="ontimeprice">{{share.nprice}}</p>-->
<!--        <p id="spj">收盘价</p>-->
</div>
{% endblock main %}

{% block css%}
<link href="{% static 'myShare/font-awesome/css/font-awesome.css' %}" rel="stylesheet">
<link href="{% static 'myShare/css/bootstrap.min.css' %}" rel="stylesheet">
<link href="{% static 'myShare/css/animate.css' %}" rel="stylesheet">
<link href="{% static 'myShare/css/style.css' %}" rel="stylesheet">
<style type="text/css">
.buyandsell{
    color:#fff;
}
.buyandsell:hover{
    color:#fff;
}
.dangqianjia{
    height:80px;
    width:150px;
}
.kaipanbtn{
    height:80px;
    width:150px;
}
</style>
{% endblock css%}

{% block javascript%}
<!-- Mainly scripts -->
    <script src="{% static 'myShare/js/jquery-2.1.1.js' %}"></script>
    <script src="{% static 'myShare/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/metisMenu/jquery.metisMenu.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>

    <!-- Flot -->
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.tooltip.min.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.spline.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.resize.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.pie.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.symbol.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/flot/jquery.flot.time.js' %}"></script>

    <!-- Peity -->
    <script src="{% static 'myShare/js/plugins/peity/jquery.peity.min.js' %}"></script>
    <script src="{% static 'myShare/js/demo/peity-demo.js' %}"></script>

    <!-- Custom and plugin javascript -->
    <script src="{% static 'myShare/js/inspinia.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/pace/pace.min.js' %}"></script>

    <!-- jQuery UI -->
    <script src="{% static 'myShare/js/plugins/jquery-ui/jquery-ui.min.js' %}"></script>

    <!-- Jvectormap -->
    <script src="{% static 'myShare/js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js' %}"></script>
    <script src="{% static 'myShare/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>

    <!-- EayPIE -->
    <script src="{% static 'myShare/js/plugins/easypiechart/jquery.easypiechart.js' %}"></script>

    <!-- Sparkline -->
    <script src="{% static 'myShare/js/plugins/sparkline/jquery.sparkline.min.js' %}"></script>

    <!-- Sparkline demo data  -->
    <script src="{% static 'myShare/js/demo/sparkline-demo.js' %}"></script>

    {% if messages %}
    <script>
        {% for msg in messages %}
            alert('{{ msg.message }}');
        {% endfor %}
    </script>
    {% endif %}
    {# ajax请求 #}
    <script>
        $(function(){
        $('#kaipan').click(function(){
        $('#kaipan').attr("disabled","True");
        $('#buy').attr("hidden",false);
        $('#sell').attr("hidden",false);
        $.ajax({
             type: "POST",
             url: "/shareinfoajax/",
             data: { sid : $("#sid").text() },
             dataType: "json",
             success: function(data){
                     plist = data.plist;
                     var i = 0;
                     myVar = setInterval(function(){
                            $("#ontimeprice").html(plist[i]);
                            i = i+1;
                            if(i == plist.length)
                            {
                                clearTimeout(myVar);
                            }
                }, 1000);

              }
         });
    });
});
    </script>
{% endblock javascript%}





